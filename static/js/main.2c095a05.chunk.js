(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{110:function(e,t,a){e.exports=a.p+"static/media/login-img.8b25c570.png"},113:function(e,t,a){e.exports=a(217)},118:function(e,t,a){},124:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},135:function(e,t){},137:function(e,t){},170:function(e,t){},171:function(e,t){},177:function(e,t){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(45),s=a.n(i),c=(a(118),a(18)),o=a(12),l=a(26),u=a(107),m=a(108),d=a(47),p=a(5),h=a.n(p);var v={name:"",email:"",token:"",load:!1},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_EMAIL":return{name:t.name,email:t.email};case"GET_TOKEN":return Object(d.a)({},e);case"GET_TOKEN_SUCCESS":return Object(d.a)({},e,{token:t.payload,load:t.load});case"GET_TOKEN_LOAD":return Object(d.a)({},e,{load:!0});default:return e}},f={score:0,asserts:0},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SCORE":return{score:t.score,asserts:t.asserts};default:return e}},y={categories:"",dificult:"",type:""},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SETTINGS":return{categories:t.categories,dificult:t.dificult,type:t.typeValue};default:return e}},k=Object(l.combineReducers)({user:g,score:b,settings:E}),O=Object(l.createStore)(k,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(m.a))),S=O;window.Cypress&&(window.store=O);var j=a(6),N=a(7),w=a(9),C=a(8),x=a(10),T=a(27),A=(a(124),function(e){function t(){return Object(j.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.setRankingInLocalStorage(this.getPlayerSpecs())}},{key:"getPlayerSpecs",value:function(){return JSON.parse(localStorage.getItem("state")).player}},{key:"getLocalStorageRanking",value:function(){return JSON.parse(localStorage.getItem("ranking"))}},{key:"setRankingInLocalStorage",value:function(e){var t=e.picture,a={name:e.name,score:e.score,picture:t},n=this.getLocalStorageRanking();this.verifyLocalStorageRanking(n)?(n.push(a),localStorage.setItem("ranking",JSON.stringify(n))):localStorage.setItem("ranking",JSON.stringify([a]))}},{key:"verifyLocalStorageRanking",value:function(e){return!!e}},{key:"renderPlayerSpecs",value:function(e){var t=e.picture,a=e.name,n=e.score;return r.a.createElement("header",{className:"header-feedback"},r.a.createElement("img",{"data-testid":"header-profile-picture",src:t,alt:a}),r.a.createElement("p",{"data-testid":"header-player-name"},a),r.a.createElement("p",{"data-testid":"header-score"},n))}},{key:"render",value:function(){var e=this.props,t=e.playerAsserts,a=e.playerScore;return r.a.createElement("div",{className:"feedback"},r.a.createElement("div",{className:"main"},r.a.createElement("div",null,this.renderPlayerSpecs(this.getPlayerSpecs())),r.a.createElement("div",{className:"div-messages"},r.a.createElement("div",{className:"div-msg"},r.a.createElement("p",{"data-testid":"feedback-total-question"},t),r.a.createElement("p",{"data-testid":"feedback-text"},t<3?"Podia ser melhor...":"Mandou bem!"),r.a.createElement("p",{"data-testid":"feedback-total-score"},a))),r.a.createElement("div",{className:"div-button"},r.a.createElement(o.b,{to:"/ranking"},r.a.createElement("button",{className:"button-ranking","data-testid":"btn-ranking",type:"button"},"Ver Ranking")),r.a.createElement(o.b,{to:"/"},r.a.createElement("button",{className:"button-play-again","data-testid":"btn-play-again",type:"button"},"Jogar novamente")))))}}]),t}(r.a.Component)),I=Object(c.b)((function(e){return{playerAsserts:e.score.asserts,playerScore:e.score.score}}))(A),P=a(32),R=a(4),G=(a(126),a(110)),B=a.n(G),_=function(e){function t(){var e;return Object(j.a)(this,t),(e=Object(w.a)(this,Object(C.a)(t).call(this))).handleChange=e.handleChange.bind(Object(R.a)(e)),e.inputsValidation=e.inputsValidation.bind(Object(R.a)(e)),e.handleGetEmail=e.handleGetEmail.bind(Object(R.a)(e)),e.tokenRequire=e.tokenRequire.bind(Object(R.a)(e)),e.state={name:!1,email:!1},e}return Object(x.a)(t,e),Object(N.a)(t,[{key:"componentWillUnmount",value:function(){this.handleGetEmail()}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(P.a)({},a,n))}},{key:"tokenRequire",value:function(){var e,t,a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e=this.props,t=e.fetchAPI,a=e.tokenAPI,t(),localStorage.setItem("token",a);case 3:case"end":return n.stop()}}),null,this)}},{key:"inputsValidation",value:function(){var e=this.state,t=e.email,a=e.name,n=/(.*)@(.*).com/.test(t);return!(a.length>=1&&!0===n)}},{key:"handleGetEmail",value:function(){var e=this.state,t=e.email,a=e.name;(0,this.props.getEmail)(t,a)}},{key:"nameAndEmailInputs",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{name:"name",type:"text","data-testid":"input-player-name",placeholder:"Coloque seu nome aqui :)",onChange:this.handleChange}),r.a.createElement("input",{name:"email",id:"email",type:"email","data-testid":"input-gravatar-email",placeholder:"E-mail aqui :)",onChange:this.handleChange}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-box"},r.a.createElement("div",{className:"left"},r.a.createElement("img",{src:B.a,className:"img-login",alt:"login"})),r.a.createElement("div",{className:"right"},r.a.createElement("h6",{className:"login-title-span"},"Bem vindo(a) ao"),r.a.createElement("h4",{className:"login-title"},"Kahootrivia"),r.a.createElement("form",{className:"form-login"},this.nameAndEmailInputs()),r.a.createElement(o.b,{to:"/trivia"},r.a.createElement("button",{className:"button-play",disabled:this.inputsValidation(),"data-testid":"btn-play",type:"button",onClick:function(){return e.tokenRequire()}},"JOGAR")),r.a.createElement(o.b,{to:"/settings"},r.a.createElement("button",{className:"settings-link","data-testid":"btn-settings",type:"button",onClick:function(){return e.tokenRequire()}},"CONFIGURA\xc7\xd5ES")))))}}]),t}(r.a.Component),q=Object(c.b)(null,(function(e){return{fetchAPI:function(){return e((function(e){var t,a,n;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e({type:"GET_TOKEN"}),r.next=3,h.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 3:return t=r.sent,r.next=6,h.a.awrap(t.json());case 6:a=r.sent,n=a.token,e({type:"GET_TOKEN_SUCCESS",payload:n,load:!1});case 9:case"end":return r.stop()}}))}))},getEmail:function(t,a){return e(function(e,t){return{type:"GET_EMAIL",name:t,email:e}}(t,a))}}}))(_),L=(a(127),function(e){function t(){return Object(j.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(N.a)(t,[{key:"getLocalStorageRanking",value:function(){return JSON.parse(localStorage.getItem("ranking"))}},{key:"sortByScore",value:function(e){return e.sort((function(e,t){return t.score-e.score}))}},{key:"buildsPlayerResults",value:function(e,t){var a=e.name,n=e.picture,i=e.score;return r.a.createElement("ul",{className:"player-specs"},r.a.createElement("li",{className:"ranking-img"},r.a.createElement("img",{src:n,alt:a,className:"img-render-ranking"})),r.a.createElement("li",{className:"ranking-name","data-testid":"player-name-".concat(t)},a),r.a.createElement("li",{className:"ranking-score","data-testid":"player-score-".concat(t)},i))}},{key:"resetPlayerSpecs",value:function(){localStorage.setItem("state",JSON.stringify({player:{assertions:0,gravatarEmail:"",name:"",picture:"",score:0}}))}},{key:"renderPlayersResults",value:function(){var e=this,t=this.getLocalStorageRanking();return this.sortByScore(t).map((function(t,a){return e.buildsPlayerResults(t,a)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"ranking"},r.a.createElement("div",{className:"title-button"},r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement(o.b,{to:"/"},r.a.createElement("button",{className:"button-start","data-testid":"btn-go-home",type:"button",onClick:this.resetPlayerSpecs},"In\xedcio"))),r.a.createElement("div",{className:"players"},this.renderPlayersResults()))}}]),t}(r.a.Component)),Q=(a(128),function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(C.a)(t).call(this,e))).state={result:"",categories:"",dificulty:"",type:"",loading:!0},a.fetchQuestionsAndAnswers=a.fetchQuestionsAndAnswers.bind(Object(R.a)(a)),a.handleChange=a.handleChange.bind(Object(R.a)(a)),a}return Object(x.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.fetchQuestionsAndAnswers()}},{key:"componentDidUpdate",value:function(){this.makeProps()}},{key:"makeProps",value:function(){var e=this.state,t=e.categories,a=e.dificulty,n=e.type;(0,this.props.getSettings)(t,a,n)}},{key:"fetchQuestionsAndAnswers",value:function(){var e,t,a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return"https://opentdb.com/api_category.php",n.next=3,h.a.awrap(fetch("https://opentdb.com/api_category.php"));case 3:return e=n.sent,n.next=6,h.a.awrap(e.json());case 6:t=n.sent,a=t.trivia_categories,this.setState({result:a,loading:!1});case 9:case"end":return n.stop()}}),null,this)}},{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(P.a)({},n,a))}},{key:"render",value:function(){var e=this.state,t=e.result;return e.loading?r.a.createElement("h1",null,"Loading..."):r.a.createElement("div",{className:"settings-page"},r.a.createElement("div",{className:"settings-text"},r.a.createElement("h1",{"data-testid":"settings-title"},"SETTINGS")),r.a.createElement("div",{className:"inputs-settings"},r.a.createElement("select",{className:"categories",name:"categories",onChange:this.handleChange},t.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("select",{className:"dificulty",name:"dificulty",onChange:this.handleChange},r.a.createElement("option",{value:"any"},"Any Difficulty"),r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"hard"},"Hard")),r.a.createElement("select",{className:"type",name:"type",onChange:this.handleChange},r.a.createElement("option",{value:"any"},"Any Type"),r.a.createElement("option",{value:"multiple"},"Multiple Choice"),r.a.createElement("option",{value:"boolean"},"True / False"))),r.a.createElement("div",{className:"settings-button-home"},r.a.createElement(o.b,{to:"/"},r.a.createElement("button",{className:"settings",type:"button"},"VOLTAR PARA PAGINA INICIAL"))))}}]),t}(r.a.Component)),J=Object(c.b)(null,(function(e){return{getSettings:function(t,a,n){return e(function(e,t,a){return{type:"GET_SETTINGS",categories:e,dificult:t,typeValue:a}}(t,a,n))}}}))(Q),U=a(111),M=a.n(U),D=function(e){function t(){var e;return Object(j.a)(this,t),(e=Object(w.a)(this,Object(C.a)(t).call(this))).state={criptoEmail:"",imgGravatar:""},e.emailCript=e.emailCript.bind(Object(R.a)(e)),e.gravatar=e.gravatar.bind(Object(R.a)(e)),e.setPlayerInLocalStorage=e.setPlayerInLocalStorage.bind(Object(R.a)(e)),e}return Object(x.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return this.emailCript(),e.next=3,h.a.awrap(this.gravatar());case 3:this.setPlayerInLocalStorage();case 4:case"end":return e.stop()}}),null,this)}},{key:"componentDidUpdate",value:function(){this.updatePlayerSpecsInLocalStorage()}},{key:"setPlayerInLocalStorage",value:function(){var e=this.state,t=e.criptoEmail,a=e.imgGravatar,n={name:this.props.nameUser,assertions:0,score:0,gravatarEmail:t,picture:a};localStorage.setItem("state",JSON.stringify({player:n}))}},{key:"updatePlayerSpecsInLocalStorage",value:function(){var e=this.state,t=e.criptoEmail,a=e.imgGravatar,n=this.props,r=n.nameUser,i=n.playerScore,s={name:r,assertions:n.playerAsserts,score:i,gravatarEmail:t,picture:a};localStorage.setItem("state",JSON.stringify({player:s}))}},{key:"emailCript",value:function(){var e=this.props.emailUser,t=M()(e).toString();this.setState({criptoEmail:t})}},{key:"gravatar",value:function(){var e,t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.state.criptoEmail,a.next=3,h.a.awrap(fetch("https://www.gravatar.com/avatar/".concat(e)));case 3:t=a.sent,this.setState({imgGravatar:t.url});case 5:case"end":return a.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state.imgGravatar,t=this.props,a=t.nameUser,n=t.playerScore;return r.a.createElement("div",{className:"header"},r.a.createElement("header",null,r.a.createElement("img",{alt:"imagem jogador","data-testid":"header-profile-picture",src:e}),r.a.createElement("p",{"data-testid":"header-player-name"},a),r.a.createElement("p",{"data-testid":"header-score"},n)))}}]),t}(n.Component),V=Object(c.b)((function(e){return{nameUser:e.user.name,emailUser:e.user.email,playerScore:e.score.score,playerAsserts:e.score.asserts}}))(D),K=a(112),F=function(e){function t(){return Object(j.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Carregando...")}}]),t}(n.Component),W=(a(214),function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(w.a)(this,Object(C.a)(t).call(this,e))).state={trivias:"",loading:!0,indexQuestion:0,activeButton:!1,disabled:!1,time:30,score:0,asserts:0,arrayOfQuestions:[]},a.fetchQuestionsAndAnswers=a.fetchQuestionsAndAnswers.bind(Object(R.a)(a)),a.showButtonNext=a.showButtonNext.bind(Object(R.a)(a)),a.makeTrivias=a.makeTrivias.bind(Object(R.a)(a)),a.questionTimer=a.questionTimer.bind(Object(R.a)(a)),a.calculateScore=a.calculateScore.bind(Object(R.a)(a)),a}return Object(x.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.fetchQuestionsAndAnswers(),this.questionTimer()}},{key:"makeProps",value:function(){var e=this.state,t=e.score,a=e.asserts;(0,this.props.getScore)(t,a)}},{key:"fetchQuestionsAndAnswers",value:function(){var e,t,a,n,r,i,s,c,o;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.props,t=e.token,a=e.categories,n=e.dificult,r=e.type,i="https://opentdb.com/api.php?amount=5&category=".concat(a,"&difficulty=").concat(n,"&type=").concat(r,"&encode=base64&token=").concat(t),l.next=4,h.a.awrap(fetch(i));case 4:return s=l.sent,l.next=7,h.a.awrap(s.json());case 7:c=l.sent,o=c.results,this.setState({trivias:o,loading:!1});case 10:case"end":return l.stop()}}),null,this)}},{key:"activeButtonNext",value:function(){var e=this,t=this.state,a=t.activeButton,n=t.indexQuestion;return r.a.createElement("button",{className:a?"":"nextButton",type:"button","data-testid":"btn-next",onClick:function(){return e.nextQuestion()}},4===n?this.redirectToFeedback():"Pr\xf3xima")}},{key:"redirectToFeedback",value:function(){return r.a.createElement(o.b,{to:"/feedback"},"Pr\xf3xima")}},{key:"questionTimer",value:function(){var e=this,t=setInterval((function(){var a=e.state,n=a.time,r=a.disabled;r||e.setState({time:n-1}),(n<=0||r)&&(clearInterval(t),e.setState({disabled:!0,time:n,activeButton:!0}),clearInterval(t))}),1e3)}},{key:"nextQuestion",value:function(){var e=this,t=this.state.indexQuestion;this.setState({indexQuestion:t+1,activeButton:!1,disabled:!1,time:30,arrayOfQuestions:[]},(function(){return e.questionTimer()}))}},{key:"showButtonNext",value:function(){this.setState({activeButton:!0,disabled:!0})}},{key:"answerColor",value:function(e){var t=this.state,a=t.activeButton,n=t.indexQuestion,r=t.trivias[n].correct_answer;if(a)return e===r?"green-border":"red-border"}},{key:"calculateScore",value:function(){var e=this,t=this.state,a=t.time,n=t.trivias,r=t.indexQuestion,i=t.score,s=t.asserts;switch(window.atob(n[r].difficulty)){case"easy":this.setState({score:i+10+1*a,asserts:s+1,activeButton:!0,disabled:!0},(function(){return e.makeProps()}));break;case"medium":this.setState({score:i+10+2*a,asserts:s+1,activeButton:!0,disabled:!0},(function(){return e.makeProps()}));break;case"hard":this.setState({score:i+10+3*a,asserts:s+1,activeButton:!0,disabled:!0},(function(){return e.makeProps()}));break;default:this.state({activeButton:!0,disabled:!0})}}},{key:"makeTrivias",value:function(){var e=this,t=this.state,a=t.trivias,n=t.indexQuestion,i=t.disabled,s=t.arrayOfQuestions,c=t.time,o=a[n],l=o.category,u=o.question,m=[a[n].correct_answer].concat(Object(K.a)(a[n].incorrect_answers)),d=a[n].correct_answer,p=s.length>0?s:m=m.sort((function(){return Math.random()-.5}));return 0===s.length&&this.setState({arrayOfQuestions:p}),r.a.createElement("div",null,r.a.createElement("span",{className:"timer"},c),r.a.createElement("h1",{"data-testid":"question-category"},window.atob(l)),r.a.createElement("div",{className:"question-box"},r.a.createElement("div",{className:"left-questions"},r.a.createElement("h2",{"data-testid":"question-text"},window.atob(u))),r.a.createElement("div",{className:"right-questions"},r.a.createElement("ol",null,p.map((function(t,a){return r.a.createElement("li",{key:a},r.a.createElement("button",{name:t===d?"correct":"incorrect",type:"button",className:"".concat(e.answerColor(t)," answers"),onClick:t===d?e.calculateScore:e.showButtonNext,disabled:i,"data-testid":t===d?"correct-answer":"wrong-answer-".concat(a)},window.atob(t)))}))),r.a.createElement("div",{className:"btn-next-div"},this.activeButtonNext()))))}},{key:"makeTriviasRender",value:function(){return this.state.loading?r.a.createElement("h1",null,"Loading await..."):this.makeTrivias()}},{key:"render",value:function(){return this.props.load?r.a.createElement(F,null):this.makeTriviasRender()}}]),t}(n.Component)),H=Object(c.b)((function(e){return{load:e.user.load,token:e.user.token,categories:e.settings.categories,dificult:e.settings.dificult,type:e.settings.type}}),(function(e){return{getScore:function(t,a){return e(function(e,t){return{type:"GET_SCORE",score:e,asserts:t}}(t,a))}}}))(W),$=(a(215),function(e){function t(){return Object(j.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"trivia-page"},r.a.createElement(V,null),r.a.createElement(H,null))}}]),t}(n.Component)),z=(a(216),function(e){function t(){return Object(j.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T.c,null,r.a.createElement(T.a,{exact:!0,path:"/",component:q}),r.a.createElement(T.a,{exact:!0,path:"/settings",component:J}),r.a.createElement(T.a,{exact:!0,path:"/trivia",component:$}),r.a.createElement(T.a,{exact:!0,path:"/feedback",component:I}),r.a.createElement(T.a,{exact:!0,path:"/ranking",component:L})))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(c.a,{store:S},r.a.createElement(o.a,null,r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[113,1,2]]]);
//# sourceMappingURL=main.2c095a05.chunk.js.map